<a id="rocket" href="#top" class="show"></a><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>node-gyp 编译超时解决办法 | 陈小亮Chan</title><!--+get_resource("blog_basic.css")--><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/highlight.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">node-gyp 编译超时解决办法</h1><a id="logo" href="/">陈小亮Chan</a><p class="description"></p></div><div id="nav-menu"><a href="/" class="current">首页</a><a href="/archives">归档</a><a href="/" class="current">关于</a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">node-gyp 编译超时解决办法</h1><div class="post-meta">October 25, 2015</div><span data-thread-key="2015/10/25/node-gyp-rebuild/" class="ds-thread-count"></span><div class="post-content"><p><em>由于Node.js官网访问不稳定，有时出现无法访问或需要用到科学上网方法的情况。会导致npm模块编译失败的情况。</em></p>
<p><strong>解决原理：  </strong><br>node-gyp 在 <code>rebuild</code> 组件时需要用到node.js源代码相关头文件信息，若nodejs.org无法访问，则源码下载失败或超时，从而导致<code>rebuild</code>不能正常执行。<br>因此，可以通过手动下载nodejs源码或全局翻墙解决此问题。本文以下载源码为例进行讲解。</p>
<p><strong>解决方法：</strong>   </p>
<ol>
<li>检查node.js的版本号 <code>node -v</code>  </li>
<li>登录<a href="https://nodejs.org/en/download/" target="_blank" rel="external">Node.js官网</a> 下载对应版本的源代码</li>
<li>解压到node-gyp的临时目录</li>
<li>重命名文件夹，node-vx.xx -&gt; x.xx (只保留版本号)</li>
<li>标致为已安装状态</li>
</ol>
<h2 id="Windows">Windows</h2><p>node-gyp 临时目录（若无则手动创建）<br>    C:\Users\XXX\ .node-gyp </p>
<p><img src="http://7sbmdw.com1.z0.glb.clouddn.com/node-gyp-win-path.jpg" alt=""></p>
<h2 id="Mac_OS">Mac OS</h2><p>node-gyp 临时目录（若无则手动创建）<br>    /Users/xxx/.node-gyp </p>
<p>进入解压后的文件夹，创建一个空文件，命名为<code>installVersion</code>。<br>输入文本<code>9</code>,回车换行，保存。   </p>
<p><img src="http://7sbmdw.com1.z0.glb.clouddn.com/node-gyp-install.jpg" alt=""></p>
<p>这时再次执行，<code>npm install</code> 命令并可以正常编译组件。<br>若仍然无法安装，可通过查看详细日志找出问题根源。<br><code>npm install --loglevel verbose</code></p>
<p>PS.<br>长城高墙越发高大，使用<code>npm</code>下载安装组件时经常遇到编译无响应、超时报错等问题。<br>大多由于github仓库、nodejs源码访问超时所致。<br>上述之举实属无奈。</p>
</div><div class="tags"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><div class="widget-title">分类</div></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/10/25/node-gyp-rebuild/">node-gyp 编译超时解决办法</a></li></ul></div><div class="widget"><div class="widget-title">友情链接</div><ul><a href="http://example1.com/" title="site-name 1" target="_blank" rel="external">site-name 1</a></ul><ul><a href="http://example2.com/" title="site-name 2" target="_blank" rel="external">site-name 2</a></ul><ul><a href="http://example3.com/" title="site-name 3" target="_blank" rel="external">site-name 3</a></ul></div></div></div></div><script src="/js/highlight.pack.js" type="text/javascript"></script><script>hljs.initHighlightingOnLoad();
</script><div id="footer">© <a href="/" real="nofollow">陈小亮Chan. </a>Powered by<a rel="nofollow" target="_blank" href="https://hexo.io">Hexo.</a>Theme by<a rel="nofollow" target="_blank" href="https://chopstack.com">Cho</a></div></div></body><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"><script>$(document).ready(function() {
  $("img").wrap(function() {
    if ($(this).hasClass('nofancybox')) return;
    return '<a href="' + $(this).attr("src") + '" rel="group" />'});
});</script><script>$(document).ready(function() {
  $("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox({
   helpers : {
   title: { type: 'inside'}
   },
   afterLoad: function(){
   this.title = this.title + ' ' + $(this.element).find('img').attr('alt');
   }
 });
});
</script></html>